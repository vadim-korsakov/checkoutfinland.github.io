<svg id="mermaidChart87" width="100%" xmlns="http://www.w3.org/2000/svg" height="100%" style="max-width:695px;" viewBox="-95 -10 695 1377"><style type="text/css" title="mermaid-svg-internal-css">/*  */
*, ::before, ::after { box-sizing: inherit;}
.actor { stroke: rgb(204, 204, 255); fill: rgb(226, 236, 255);}
text.actor { fill: black; stroke: none; font-size: 12px;}
.actor-line { stroke: grey;}
.messageLine0 { stroke-width: 1.5; stroke: black;}
.messageLine1 { stroke-width: 1.5; stroke: black;}
#arrowhead { fill: black;}
.messageText { fill: black; stroke: none; font-size: 12px;}
.labelBox { stroke: rgb(204, 204, 255); fill: rgb(236, 236, 255);}
.labelText { fill: black; stroke: none;}
.loopText { fill: black; stroke: none;}
.loopLine { stroke-width: 2; stroke: rgb(204, 204, 255);}
.note { stroke: rgb(204, 204, 255); fill: rgb(255, 245, 173);}
.noteText { fill: black; stroke: none; font-size: 12px;}
.actor { stroke: rgb(204, 204, 255); fill: rgb(236, 236, 255);}
text.actor { fill: black; stroke: none;}
.actor-line { stroke: grey;}
.messageLine0 { stroke-width: 1.5; stroke: rgb(51, 51, 51);}
.messageLine1 { stroke-width: 1.5; stroke: rgb(51, 51, 51);}
#arrowhead { fill: rgb(51, 51, 51);}
#crosshead path { fill: rgb(51, 51, 51) !important; stroke: rgb(51, 51, 51) !important;}
.messageText { fill: rgb(51, 51, 51); stroke: none;}
.labelBox { stroke: rgb(204, 204, 255); fill: rgb(236, 236, 255);}
.labelText { fill: black; stroke: none;}
.loopText { fill: black; stroke: none;}
.loopLine { stroke-width: 2; stroke: rgb(204, 204, 255);}
.note { stroke: rgb(170, 170, 51); fill: rgb(255, 245, 173);}
.noteText { fill: black; stroke: none; font-family: "trebuchet ms", verdana, arial; font-size: 14px;}
text { font-family: "trebuchet ms", verdana, arial; font-size: 14px;}
/*  */
</style><g></g><g><line id="actor261" x1="75" y1="5" x2="75" y2="1366" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="37.5" class="actor" style="text-anchor: middle;">Client</text></g><g><line id="actor262" x1="275" y1="5" x2="275" y2="1366" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="37.5" class="actor" style="text-anchor: middle;">payment.checkout.fi</text></g><g><line id="actor263" x1="475" y1="5" x2="475" y2="1366" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="37.5" class="actor" style="text-anchor: middle;">Payment Highway</text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><text x="175" y="93" class="messageText" style="text-anchor: middle;">POST : /token/card/add</text><line x1="75" y1="100" x2="275" y2="100" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="270" y="102" fill="#f4f4f4" stroke="#666" width="10" height="170" rx="0" ry="0"></rect></g><g><text x="377.5" y="128" class="messageText" style="text-anchor: middle;">Get form from PH</text><line x1="280" y1="135" x2="475" y2="135" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><rect x="470" y="137" fill="#f4f4f4" stroke="#666" width="10" height="100" rx="0" ry="0"></rect></g><g><rect x="300" y="145" fill="#EDF2AE" stroke="#666" width="150" height="57" rx="0" ry="0" class="note"></rect><text x="316" y="173" fill="black" class="noteText"><tspan x="316">Get form using CO</tspan><tspan dy="21" x="316">success URL</tspan></text></g><g><text x="375" y="230" class="messageText" style="text-anchor: middle;">form</text><line x1="470" y1="237" x2="280" y2="237" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="172.5" y="265" class="messageText" style="text-anchor: middle;">200 : HTML form</text><line x1="270" y1="272" x2="75" y2="272" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="275" y="325" class="messageText" style="text-anchor: middle;">POST : Submit form</text><line x1="75" y1="332" x2="475" y2="332" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="470" y="359" fill="#f4f4f4" stroke="#666" width="10" height="103" rx="0" ry="0"></rect></g><g><text x="272.5" y="385" class="messageText" style="text-anchor: middle;">303 : Redirect PH success URL</text><line x1="470" y1="392" x2="75" y2="392" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="272.5" y="420" class="messageText" style="text-anchor: middle;">GET : PH success URL</text><line x1="75" y1="427" x2="470" y2="427" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="272.5" y="455" class="messageText" style="text-anchor: middle;">303 : Redirect CO success URL</text><line x1="470" y1="462" x2="75" y2="462" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="175" y="490" class="messageText" style="text-anchor: middle;">GET : CO success URL</text><line x1="75" y1="497" x2="275" y2="497" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="270" y="499" fill="#f4f4f4" stroke="#666" width="10" height="142" rx="0" ry="0"></rect></g><g><rect x="300" y="507" fill="#EDF2AE" stroke="#666" width="150" height="99" rx="0" ry="0" class="note"></rect><text x="316" y="535" fill="black" class="noteText"><tspan x="316">Generate</tspan><tspan dy="21" x="316">CO-token and</tspan><tspan dy="21" x="316">migrate with</tspan><tspan dy="21" x="316">provider token</tspan></text></g><g><text x="172.5" y="634" class="messageText" style="text-anchor: middle;">302 : Redirect client success URL</text><line x1="270" y1="641" x2="75" y2="641" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="75" y="669" class="messageText" style="text-anchor: middle;">GET : Client success URL</text><path d="M 75,676 C 135,666 135,706 75,696" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#crosshead)" style="fill: none;"></path></g><g><rect x="470" y="728" fill="#f4f4f4" stroke="#666" width="10" height="103" rx="0" ry="0"></rect></g><g><text x="272.5" y="754" class="messageText" style="text-anchor: middle;">303 : Redirect PH failure URL</text><line x1="470" y1="761" x2="75" y2="761" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="272.5" y="789" class="messageText" style="text-anchor: middle;">GET : PH failure URL</text><line x1="75" y1="796" x2="470" y2="796" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="272.5" y="824" class="messageText" style="text-anchor: middle;">303 : Redirect CO failure URL</text><line x1="470" y1="831" x2="75" y2="831" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="175" y="859" class="messageText" style="text-anchor: middle;">GET : CO failure URL</text><line x1="75" y1="866" x2="275" y2="866" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="270" y="868" fill="#f4f4f4" stroke="#666" width="10" height="33" rx="0" ry="0"></rect></g><g><text x="172.5" y="894" class="messageText" style="text-anchor: middle;">302 : Redirect client failure URL</text><line x1="270" y1="901" x2="75" y2="901" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="75" y="929" class="messageText" style="text-anchor: middle;">GET : Client failure URL</text><path d="M 75,936 C 135,926 135,966 75,956" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#crosshead)" style="fill: none;"></path></g><g><line x1="-35" y1="342" x2="490" y2="342" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="490" y1="342" x2="490" y2="976" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="-35" y1="976" x2="490" y2="976" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="-35" y1="342" x2="-35" y2="976" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="-35" y1="716" x2="490" y2="716" stroke-width="2" stroke="#526e52" class="loopLine"></line><rect x="-35" y="342" fill="#526e52" stroke="none" width="50" height="20" rx="0" ry="0" class="labelBox"></rect><text x="-27.5" y="357" fill="white" class="labelText"><tspan x="-27.5">alt</tspan></text><text x="227.5" y="357" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="227.5">[ Success ]</tspan></text><text x="227.5" y="731" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="227.5">[ Failure ]</tspan></text></g><g><text x="275" y="1024" class="messageText" style="text-anchor: middle;">GET : Cancel form</text><line x1="75" y1="1031" x2="475" y2="1031" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="470" y="1033" fill="#f4f4f4" stroke="#666" width="10" height="103" rx="0" ry="0"></rect></g><g><text x="272.5" y="1059" class="messageText" style="text-anchor: middle;">303 : Redirect PH cancel URL</text><line x1="470" y1="1066" x2="75" y2="1066" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="272.5" y="1094" class="messageText" style="text-anchor: middle;">GET : PH cancel URL</text><line x1="75" y1="1101" x2="470" y2="1101" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="272.5" y="1129" class="messageText" style="text-anchor: middle;">303 : Redirect CO cancel URL</text><line x1="470" y1="1136" x2="75" y2="1136" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="175" y="1164" class="messageText" style="text-anchor: middle;">GET : CO cancel URL</text><line x1="75" y1="1171" x2="275" y2="1171" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="270" y="1173" fill="#f4f4f4" stroke="#666" width="10" height="33" rx="0" ry="0"></rect></g><g><text x="172.5" y="1199" class="messageText" style="text-anchor: middle;">302 : Redirect client cancel URL</text><line x1="270" y1="1206" x2="75" y2="1206" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="75" y="1234" class="messageText" style="text-anchor: middle;">GET : Client cancel URL</text><path d="M 75,1241 C 135,1231 135,1271 75,1261" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#crosshead)" style="fill: none;"></path></g><g><line x1="-45" y1="282" x2="500" y2="282" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="500" y1="282" x2="500" y2="1281" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="-45" y1="1281" x2="500" y2="1281" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="-45" y1="282" x2="-45" y2="1281" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="-45" y1="986" x2="500" y2="986" stroke-width="2" stroke="#526e52" class="loopLine"></line><rect x="-45" y="282" fill="#526e52" stroke="none" width="50" height="20" rx="0" ry="0" class="labelBox"></rect><text x="-37.5" y="297" fill="white" class="labelText"><tspan x="-37.5">alt</tspan></text><text x="227.5" y="297" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="227.5">[ Submit ]</tspan></text><text x="227.5" y="1001" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="227.5">[ Cancel ]</tspan></text></g><g><rect x="0" y="1301" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="1338.5" class="actor" style="text-anchor: middle;">Client</text></g><g><rect x="200" y="1301" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="1338.5" class="actor" style="text-anchor: middle;">payment.checkout.fi</text></g><g><rect x="400" y="1301" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="1338.5" class="actor" style="text-anchor: middle;">Payment Highway</text></g></svg>